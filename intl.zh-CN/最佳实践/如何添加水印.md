# 如何添加水印 {#concept_qjv_ypl_x2b .concept}

视频水印，指在视频上添加相关信息（如企业logo、电视台台标、用户昵称等），以突出品牌、维护版权、增加产品的识别度。媒体处理支持**图片水印**、**动画水印**和**文字水印**三种水印类型，您可按需选择。

## 类型 {#section_kyz_bql_x2b .section}

-   **图片水印**：使用一张PNG图片作为水印，该图片位于视频的某个固定位置，并支持指定展示时间（从片头贯穿到片尾或者仅在某些时间段展示）。

-   **动画水印**：使用APNG动图或者mov视频作为水印，该动画位于视频的固定位置循环播放。

-   **文字水印**：使用一段文字作为水印，可设置文字的字体、字号、颜色， 支持每个视频添加不同文字内容。


## 参数说明 {#section_rzd_2ql_x2b .section}

在提交转码任务时（参见[如何提交转码作业](intl.zh-CN/最佳实践/转码/如何进行简单转码.md#)），可以指定水印模板和水印素材，为输出视频添加水印信息。

每个转码作业可以指定若干个[WaterMark](../../../../../intl.zh-CN/API参考/附录/参数详情.md#)对象，每个WaterMark又包含很多参数：

-   WaterMarkTemplateId（水印模板ID）

    水印模板包含了一些常见参数，例如：Type、ReferPos、Width、Height、Dx、Dy等。

    您可以在媒体处理控制台创建，参见[创建水印模板](../../../../../intl.zh-CN/用户指南/全局设置.md#)。

    **说明：** WaterMark对象中的对应参数比模板的参数优先级更高，会覆盖模板中配置的对应参数。

-   Type（水印类型）

    添加图片水印、动画水印时，Type设置为Image，同时设置InputFile参数，即水印素材的OSS存储路径。

    添加文字水印时，Type设置为Text，同时指定[TextWaterMark](../../../../../intl.zh-CN/API参考/附录/参数详情.md#)参数，包括字体、字号、颜色、透明度等。

-   ReferPos（水印位置）

    水印显示的参考位置，Dx、Dy是相对于参考位置来计算的。参见[水印模板配置](../../../../../intl.zh-CN/API参考/附录/参数详情.md#)。

    水印位置坐标说明：

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/18600/155488152210135_zh-CN.png)

-   Width、Height、Dx、Dy

    设置水印的宽度、高度、水平偏移、垂直偏移。支持两种计算方式：

    -   绝对值：

        单位：像素，取值范围：\[8，4096\]。

    -   相对比例：

        相对输出视频分辨率的宽度、高度。取值范围（0，1），精确到4位小数点，例如：0.9999。

    -   默认值：

        -   Dx、Dy不设置时，则默认值为0。

        -   宽、高都不设置时，水印宽的取值为输出视频分辨率宽的0.12倍，水印高的取值按水印原图宽高比例等比缩放。

        -   宽或高的值设置一个，另一个不设置时，则另一个的取值按水印原图宽高比等比缩放。

        -   宽、高的值都设置时，按实际设置值设置水印图片。

-   InputFile（输入文件）

    设置图片水印或动画水印的OSS文件地址，图片支持PNG格式，动画支持mov格式和apng格式。

    **说明：** 动画水印的文件扩展名必须是小写mov或者apng，图片不受文件扩展名影响。

-   [TextWaterMark](../../../../../intl.zh-CN/API参考/附录/参数详情.md#)（文字水印）

    设置文字水印的详细参数。

    **说明：** 文字水印暂不支持参考位置和相对比例，只支持以左上角为参考位置，设置Dx、Dy绝对像素值偏移。


## 使用场景 {#section_p4n_zql_x2b .section}

短视频

短视频场景中，被下载和分享的视频，通常带有一个图片水印（产品logo）和一个文字水印（用户ID），用于保护版权。

示例：

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/18600/155488152210136_zh-CN.png)

音视频网站

音视频网站，通常会在视频上添加品牌logo，宣示版权归属。同时，在综艺节目中，也会加入贴纸元素，增加趣味性或增加广告展现。

示例：

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/18600/155488152210137_zh-CN.png)

## 示例代码 {#section_xbk_grl_x2b .section}

在转码成`720P(1280x720)`清晰度的MP4视频文件时，同时设置3个水印，并显式覆盖水印参数：

-   图片水印

    以右上角为参考位置，显示一个宽占输出分辨率0.05比例，高度按图片原始比例自适应。

-   文字水印

    以左上角为参考位置，显示内容`测试文字水印`。字体信息：宋体、大小16、红色，显示的内容按照50%的透明度叠加在视频上。

-   动画水印

    以左下角为参考位置，显示一个高度240像素的mov视频，宽度按照视频水印原始比例自适应。


具体示例代码如下：

-   [水印-Java SDK](../../../../../intl.zh-CN/SDK参考/媒体转码SDK/Java SDK/水印.md#)

-   [水印-Python SDK](../../../../../intl.zh-CN/SDK参考/媒体转码SDK/Python SDK/水印.md#)

-   [水印-PHP SDK](../../../../../intl.zh-CN/SDK参考/媒体转码SDK/PHP SDK/水印.md#)


