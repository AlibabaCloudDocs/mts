# 转码消息通知

媒体处理已全面支持消息服务的消息队列和消息通知功能，使用转码消息通知功能前需先启用该功能。

## 创建消息通知

操作步骤

1.  开通[消息服务MNS](https://www.aliyun.com/product/mns?spm=a2c4g.11186623.J_8058803260.36.6882223ev7QN0I)。

    ![开通](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/4716664161/p244847.png)

2.  登录**管理控制台**。

    ![控制台](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/4716664161/p244848.png)

3.  在导航栏选择**主题列表**，单击**创建主题**。

    **说明：** 这里以创建**消息通知**为例，创建**消息队列**请在导航栏选择**队列列表**，以下创建步骤相同。

    ![主题](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5716664161/p244850.png)

4.  创建主题。

    ![主图](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5716664161/p244856.png)

    |参数|说明|
    |--|--|
    |**名称**|在文本框中输入主题名称。|
    |**消息最大长度**|在文本框中输入最大长度值。取值：**1024**~**65536**。|
    |**启用日志功能**|在选项中选择**是**或**否**。**说明：** 开启日志功能后，消息服务MNS将自动推送该主题的操作日志到指定的LoggingBucket中。然后您可以通过日志查看消息轨迹，消息延迟以及其他信息。 |

5.  单击**确定**，完成主题创建。
6.  单击**创建订阅**。

    ![订阅](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5716664161/p244858.png)

7.  设置订阅。

    ![订阅](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5716664161/p244860.png)

    |参数|说明|
    |--|--|
    |**名称**|在文本框中，输入订阅名称。|
    |**推送类型**|在下拉列表中，选择类型，默认为**HTTP**。|
    |**接收端地址**|在文本框中，输入**接收端地址**。|
    |（可选）**消息过滤标签**|在文本框中，输入需要过滤的标签。|
    |**重试策略**|在选项中，选择**退避重试**或**指数衰减重试**。|
    |**消息推送格式**|在选项中，选择格式。|

8.  单击**确定**，完成订阅创建，完成后需要绑定转码管道。

## 设定转码管道与通知绑定关系

操作步骤

1.  登录[媒体处理控制台](https://mps.console.aliyun.com/pipeline/list)。
2.  在顶部菜单栏左侧选择地域。
3.  在左侧导航栏，选择**全局设置** \> **管道**。
4.  在管道列表中，选择需要开启消息通知的管道，在**操作**列单击**设置消息通知**。

    设置消息通知。

    ![通知](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5716664161/p243203.png)

    |参数|说明|
    |--|--|
    |**消息通知**|单击**消息通知**开关。|
    |**消息类型**|选择**队列**或**名称**。|
    |**队列名称、通知名称**|根据选择的**消息类型**，在**队列名称**或**通知名称**下拉框中选择已经创建的名称。|

5.  单击**确定**，完成消息通知绑定。

