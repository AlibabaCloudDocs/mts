# 媒体处理常见问题

您可根据下列分类匹配对应的问题场景和解决方案。

## 基础问题

-   如何将我的媒体文件上传到OSS？

    您可以通过OSS控制台进行文件上传，具体操作，请参见[OSS上传文件](/cn.zh-CN/控制台指南/媒体管理/上传视频.md)。

-   媒体处理能处理多大的媒体文件？

    媒体处理支持不超过100GB的输入文件。如您需要处理更大的媒体文件，请[提交工单](https://selfservice.console.aliyun.com/ticket/category/mts/recommend/304)告知我们。

-   是否可以使用CDN来分发媒体文件？

    我们推荐使用阿里云CDN服务来分发您的内容，您可以将存储转码输出内容的OSS Bucket作为阿里云CDN的源站，缩短用户查看媒体文件的延迟，提高用户访问的响应速度，解决网络带宽小、用户访问量大、网点分布不均等问题，要了解更多信息，请访问 [CDN产品详情页面](https://www.aliyun.com/product/cdn?spm=5176.8142029.388261.303.5b946d3eIxlHZm)。具体操作，请参见[域名管理](/cn.zh-CN/用户指南/域名管理.md)。

-   一个转码作业需要多长时间？

    许多因素会影响转码速度，例如输入文件的时长、分辨率以及比特率、转码模版设置等。一般的作业时长为输入文件时长的0.5倍到2倍之间。如果收到大量作业，它们将被排序处理。

-   能否实时查询转码进度？

    目前不提供实时查询转码进度的接口。转码进度为0%，说明转码任务在准备中（视频下载、视频分析等），转码进度为20%，说明已经开始执行转码，请您耐心等候；转码进度为100%，说明转码任务已完成。

-   能否为一个作业创建多个输出？

    每一个转码作业都对应一个输入文件、一个转码模版和一个转码输出文件。媒体转码支持一次提交多个输出，系统会为每个输出创建一个作业。

-   可以同时处理几个作业？

    每个用户都有默认的转码资源限制，转码资源分配给管道使用，各管道相互独立。每个管道同时处理的作业数量最多不超过分配给该管道资源限额。参见[媒体处理服务使用限制]()。

-   什么是转码资源？

    转码资源是媒体处理执行转码作业的计算节点，一个转码资源同一时间可执行一个转码作业。目前推出的是共享型转码资源。媒体转码为每个用户设置了共享型转码资源的配额，用户最多能同时处理的作业数量不超过该限额。在系统繁忙时，能同时处理的作业数量可能小于共享型转码资源限额。

-   什么是转码预置模板？

    预置模板是一种内置转码模板，其中包含您希望媒体转码在转码过程中应用的各种设置，例如转码输出文件的格式、分辨率和编解码器。媒体处理会智能分析视频特征，推荐该视频适配各种播放终端及网络带宽条件的预置码模板。您创建作业时，可以指定推荐使用的预置模板。在提交转码作业时，若指定不在推荐范围内的预置模板则会返回错误。请参见[预置模板详情]()。

-   如果你们提供的转码预置模板都不适合，我该怎么办？

    您可以创建您自己的自定义转码模板。要了解有关自定义转码模板的更多信息，请参见[自定义转码模板]()。

-   为什么我的作业一直失败？

    作业失败有多种原因，请留意返回错误信息。如果您收到预处理失败的错误，说明我们无法解码您的源文件，请[提交工单](https://selfservice.console.aliyun.com/ticket/category/mts/recommend/304)告知我们详细信息。我们需要以下信息来协助诊断：阿里云账户ID、作业ID。

-   是否支持加密或DRM？

    媒体处理服务支持数据加密，请参见[视频加密](/cn.zh-CN/用户指南/视频加密.md)。

-   是否可以提供为我专用的转码器？

    媒体处理不支持转码器定制和独占服务。

-   是否支持实时编码？

    媒体处理目前是基于文件的转码服务，暂不支持实时转码。

-   在哪里可以使用媒体处理服务？

    具体信息，请参见[服务地域]()。

-   媒体处理创建消息主题出现“Only one topic can be created！”错误。

    目前媒体处理每个用户只能开一个管道，无法创建多管道，所以会出现Only one topic can be created！这个错误。开启管道或添加管道，请参见[开启管道](/cn.zh-CN/控制台指南/全局设置/管道/开启管道.md)。

-   媒体处理服务中AliyunAudioCodec中Profile字段的含义。

    媒体处理中的音频编解码配置类型中支持以下五种Profile：

    -   MPEG-4 AAC LC（default）
    -   MPEG-4 HE-AAC （SBR）
    -   MPEG-4 HE-AAC v2（SBR+PS）
    -   MPEG-4 AAC LD
    -   MPEG-4 AAC ELD
    兼容性：LC-AAC\>HE-AAC\>HE-AAC v2

    压缩率：HE-AAC v2\>HE-AAC\>LC-AAC

    LD跟ELD主要用于广播等快速编码场景。

    ![流程](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2693838161/p263274.png)

    SBR：Spectral Band Replication（频段复制），SBR把频谱切割开来，低频单独编码保存主要成分，高频单独放大编码保存音质。

    PS：Parametric Stereo（参数立体声），PS存储一个声道的全部信息，然后花很少的字节用参数描述另一个声道和它的差异。

-   使用SubmitJobs API提交转码作业，转码失败后如何排查？
    -   确认转码源文件能否在本地正常播放（非常重要），经统计大部分转码失败是因为源文件本身有问题（如：视频流缺失，Meta存在问题等）。
    -   在[错误码表](/cn.zh-CN/API参考/转码接口/提交转码作业.md)中找到对应的错误码，分析具体失败原因。

## 格式支持

-   支持哪些输入格式？
    -   容器格式

        3GP、AVI、FLV、MP4、M3U8、MPG、ASF、WMV、MKV、MOV、TS、WebM等。

    -   视频编码格式

        H.264/AVC、H.263、 H.263+、MPEG-1、MPEG-2、MPEG-4、MJPEG、VP8、VP9、Quicktime、RealVideo、Windows Media Video等。

    -   音频编码格式

        AAC、AC-3、ADPCM、AMR、DSD、MP1、MP2、MP3、PCM、RealAudio、Windows Media Audio

-   支持哪些输出格式？

    我们建议为P 设备输出FLV 文件，为Android设备输出MP4文件，为IOS设备输出TS（M3U8）文件。视频编码格式默认为H.264/AVC，音频编码格式默认为AAC。

    -   容器格式

        视频转码：FLV、MP4、TS 、M3U8、GIF。

        音频转码：MP3、MP4、OGG、FLAC

    -   视频编码格式

        H.264/AVC、 H.265/HEVC

    -   音频编码格式

        MP3、AAC、VORBIS、FLAC

-   在哪里可以找到支持格式的完整列表？

    媒体转码支持格式的完整列表，请参见[格式支持]()。

-   创建MP4文件时，是否支持边播边下？

    我们将 MP4 的 MOOV 原子定位于文件的开头，从而使您的播放器能够立即开始播放，无需等到整个文件下载完成。

-   是否支持环绕立体声格式？

    从媒体处理输出的已转码音频支持双通道 AAC 、MP3格式。


## 安全性

-   我的媒体文件是否安全？

    所有的媒体资源都存储于您自己的OSS Bucket中。您通过RAM来授予媒体转码访问您特定Bucket中指定的文件。

-   是否支持加密媒体文件？

    媒体处理服务暂时不支持加密的输入文件。


