# 提交媒体信息作业

提交媒体信息作业接口，媒体处理服务会对输入文件进行媒体信息分析，同步返回输入文件的媒体信息。

**说明：** 您可以通过[查询媒体信息作业](~29221~)接口得到媒体信息分析结果。

## 调试

[您可以在OpenAPI Explorer中直接运行该接口，免去您计算签名的困扰。运行成功后，OpenAPI Explorer可以自动生成SDK代码示例。](https://api.aliyun.com/#product=Mts&api=SubmitMediaInfoJob&type=RPC&version=2014-06-18)

## 请求参数

|名称|类型|是否必选|示例值|描述|
|--|--|----|---|--|
|Action|String|否|SubmitMediaInfoJob|系统规定参数，取值：**SubmitMediaInfoJob**。 |
|Input|String|是|\{"Bucket":"example-bucket","Location":"oss-cn-hangzhou","Object":"example.flv"\}|作业输入。

 Json对象，例如：`{"Bucket":"example-bucket","Location":"oss-cn-hangzhou","Object":"example.flv"}`，需在控制台授予此Bucket权限给媒体转码服务。 |
|PipelineId|String|否|88c6ca184c0e4\*\*\*\*\*5b665e2a126797|管道ID。 |
|Async|Boolean|否|true|发起异步作业。

 -   **true**：表示异步作业 |
|UserData|String|否|testid-001|用户自定义数据。最大长度1024个字节。 |

## 返回数据

|名称|类型|示例值|描述|
|--|--|---|--|
|MediaInfoJob|Struct| |媒体信息作业。 |
|Async|Boolean|true|是否异步。 |
|Code|String|xxx|元信息分析失败时错误码。 |
|CreationTime|String|2014-01-10T12:00:00Z|作业添加时间。 |
|Input|Struct| |作业输入。 |
|Bucket|String|example-bucket|OSS的Bucket。`3～63`字节。 |
|Location|String|oss-cn-hangzhou|OSS的服务区域。最大64字节。 |
|Object|String|example.flv|OSS的Object。最大1024字节。 |
|JobId|String|88c6ca184c0e4\*\*\*\*\*5b665e2a126797|元信息分析作业ID。 |
|MNSMessageResult|Struct| |MNS通知用户作业完成的结果。 |
|ErrorCode|String|xxx|失败时错误码。 |
|ErrorMessage|String|xxx|失败时错误信息。 |
|MessageId|String|123|成功时消息ID。 |
|Message|String|xxx|元信息分析失败时错误信息。 |
|PipelineId|String|88c6ca184c0e4\*\*\*\*\*5b665e2a126797|管道ID。 |
|Properties|Struct| |属性。 |
|Bitrate|String|1630.045|码率。 |
|Duration|String|17.226000|总时长。 |
|FileFormat|String|QuickTime / MOV|文件格式。 |
|FileSize|String|3509895|文件大小。 |
|Format|Struct| |格式信息。 |
|Bitrate|String|1630.045|总码率。 |
|Duration|String|17.226000|总时长。 |
|FormatLongName|String|QuickTime / MOV|容器、封装格式长述名。 |
|FormatName|String|mov,mp4,m4a,3gp,3g2,mj2|容器、封装格式简述名。 |
|NumPrograms|String|0|节目流总数。 |
|NumStreams|String|2|媒体流总数。 |
|Size|String|3509895|文件大小。 |
|StartTime|String|0.000000|起始时间。 |
|Fps|String|25|帧率。 |
|Height|String|1080|视频像素长。 |
|Streams|Struct| |流信息。 |
|AudioStreamList|Array of AudioStream| |音频流列表。

 列表元素至多4个。 |
|AudioStream| | | |
|Bitrate|String|128.806|码率。 |
|ChannelLayout|String|stereo|声道输出样式。 |
|Channels|String|2|声道数。 |
|CodecLongName|String|AAC \(Advanced Audio Coding\)|编码格式长述名。 |
|CodecName|String|aac|编码格式简述名。 |
|CodecTag|String|0x6134706d|编码格式标记。 |
|CodecTagString|String|mp4a|编码格式标记文本。 |
|CodecTimeBase|String|1/44100|编码时基。 |
|Duration|String|17.159546|时长。 |
|Index|String|1|音频流序号，标识音频流在整个媒体流中的位置。 |
|Lang|String|eng|语言。 |
|NumFrames|String|123|总帧数。 |
|SampleFmt|String|fltp|采样格式。 |
|Samplerate|String|44100|采样率。 |
|StartTime|String|0.000000|起始时间。 |
|Timebase|String|1/44100|时基。 |
|SubtitleStreamList|Array of SubtitleStream| |字幕流列表。

 列表元素至多4个。 |
|SubtitleStream| | | |
|CodecLongName|String|ASS \(Advanced SSA\) subtitle|编码格式长述名。 |
|CodecName|String|ass|编码格式简述名。 |
|CodecTag|String|0x0000|编码格式标记。 |
|CodecTagString|String|\[0\]\[0\]\[0\]\[0\]|编码格式标记文本。 |
|CodecTimeBase|String|0/1|编码时基。 |
|Duration|String|1370.116000|时长。 |
|Index|String|3|字幕流序号。

 标识字幕流在整个媒体流中的位置。 |
|Lang|String|eng|语言。 |
|StartTime|String|0.000000|起始时间。 |
|Timebase|String|1/1000|时基。 |
|VideoStreamList|Array of VideoStream| |视频流列表。

 列表元素至多4个。 |
|VideoStream| | | |
|AvgFPS|String|23.976025|平均帧率。 |
|Bitrate|String|1496.46|码率。 |
|CodecLongName|String|H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10|编码格式长述名。 |
|CodecName|String|h264|编码格式简述名。 |
|CodecTag|String|0x31637661|编码格式标记。 |
|CodecTagString|String|avc1|编码格式标记文本。 |
|CodecTimeBase|String|1001/48000|编码时基。 |
|Dar|String|16:9|编码显示分辨率比。 |
|Duration|String|17.225542|时长。 |
|Fps|String|25|帧率。 |
|HasBFrames|String|0|是否有B帧。 |
|Height|String|1080|视频分辨率长。 |
|Index|String|1|视频流序号，标识视频流在整个媒体流中的位置。 |
|Lang|String|eng|语言。 |
|Level|String|41|编码等级。 |
|NetworkCost|Struct| |网络带宽消耗。 |
|AvgBitrate|String|300.34|平均码率。 |
|CostBandwidth|String|10|最大消耗带宽。 |
|PreloadTime|String|8|预加载时间。 |
|NumFrames|String|100|总帧数。 |
|PixFmt|String|yuv420p|像素格式。 |
|Profile|String|High|编码预置。 |
|Rotate|String|90|视频旋转角度。 |
|Sar|String|1:1|编码信号分辨率比。 |
|StartTime|String|0.042000|起始时间。 |
|Timebase|String|1/24000|时基。 |
|Width|String|1920|视频分辨率宽。 |
|Width|String|1920|视频像素宽。 |
|State|String|Analyzing|作业状态。 |
|UserData|String|testid-001|用户自定义数据。 |
|RequestId|String|25818875-5F78-4A13-BE\*\*\*\*\*F6-D7393642CA58|请求ID。 |

## 示例

请求示例

```
http(s)://[Endpoint]/?Action=SubmitMediaInfoJob
&Input={"Bucket":"example-bucket","Location":"oss-cn-hangzhou","Object":"example.flv"}
&<公共请求参数>
```

正常返回示例

`XML`格式

```
<MediaInfoJob>
    <Message>xxx</Message>
    <UserData>testid-001</UserData>
    <State>Analyzing</State>
    <Async>true</Async>
    <CreationTime>2014-01-10T12:00:00Z</CreationTime>
    <PipelineId>88c6ca184c0e4*****5b665e2a126797</PipelineId>
    <Code>xxx</Code>
    <JobId>88c6ca184c0e4*****5b665e2a126797</JobId>
    <Input>
        <Bucket>example-bucket</Bucket>
        <Object>example.flv</Object>
        <Location>oss-cn-hangzhou</Location>
    </Input>
    <Properties>
        <Fps>25</Fps>
        <Duration>17.226000</Duration>
        <Height>1080</Height>
        <FileFormat>QuickTime / MOV</FileFormat>
        <Bitrate>1630.045</Bitrate>
        <Width>1920</Width>
        <FileSize>3509895</FileSize>
        <Streams>
            <VideoStreamList>
                <VideoStream>
                    <CodecTag>0x31637661</CodecTag>
                    <CodecTimeBase>1001/48000</CodecTimeBase>
                    <Rotate>90</Rotate>
                    <Sar>1:1</Sar>
                    <StartTime>0.042000</StartTime>
                    <Fps>25</Fps>
                    <Lang>eng</Lang>
                    <Duration>17.225542</Duration>
                    <Index>1</Index>
                    <PixFmt>yuv420p</PixFmt>
                    <Bitrate>1496.46</Bitrate>
                    <CodecName>h264</CodecName>
                    <AvgFPS>23.976025</AvgFPS>
                    <Profile>High</Profile>
                    <Timebase>1/24000</Timebase>
                    <HasBFrames>0</HasBFrames>
                    <CodecTagString>avc1</CodecTagString>
                    <Dar>16:9</Dar>
                    <CodecLongName>H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10</CodecLongName>
                    <Level>41</Level>
                    <Height>1080</Height>
                    <NumFrames>100</NumFrames>
                    <Width>1920</Width>
                    <NetworkCost>
                        <AvgBitrate>300.34</AvgBitrate>
                        <PreloadTime>8</PreloadTime>
                        <CostBandwidth>10</CostBandwidth>
                    </NetworkCost>
                </VideoStream>
            </VideoStreamList>
            <SubtitleStreamList>
                <SubtitleStream>
                    <Timebase>1/1000</Timebase>
                    <CodecTag>0x0000</CodecTag>
                    <CodecTagString>[0][0][0][0]</CodecTagString>
                    <CodecTimeBase>0/1</CodecTimeBase>
                    <CodecLongName>ASS (Advanced SSA) subtitle</CodecLongName>
                    <StartTime>0.000000</StartTime>
                    <Lang>eng</Lang>
                    <Duration>1370.116000</Duration>
                    <Index>3</Index>
                    <CodecName>ass</CodecName>
                </SubtitleStream>
            </SubtitleStreamList>
            <AudioStreamList>
                <AudioStream>
                    <CodecTag>0x6134706d</CodecTag>
                    <CodecTimeBase>1/44100</CodecTimeBase>
                    <ChannelLayout>stereo</ChannelLayout>
                    <StartTime>0.000000</StartTime>
                    <Lang>eng</Lang>
                    <Duration>17.159546</Duration>
                    <Index>1</Index>
                    <SampleFmt>fltp</SampleFmt>
                    <Bitrate>128.806</Bitrate>
                    <Samplerate>44100</Samplerate>
                    <CodecName>aac</CodecName>
                    <Channels>2</Channels>
                    <Timebase>1/44100</Timebase>
                    <CodecTagString>mp4a</CodecTagString>
                    <CodecLongName>AAC (Advanced Audio Coding)</CodecLongName>
                    <NumFrames>123</NumFrames>
                </AudioStream>
            </AudioStreamList>
        </Streams>
        <Format>
            <NumPrograms>0</NumPrograms>
            <Size>3509895</Size>
            <FormatLongName>QuickTime / MOV</FormatLongName>
            <StartTime>0.000000</StartTime>
            <FormatName>mov,mp4,m4a,3gp,3g2,mj2</FormatName>
            <NumStreams>2</NumStreams>
            <Duration>17.226000</Duration>
            <Bitrate>1630.045</Bitrate>
        </Format>
    </Properties>
    <MNSMessageResult>
        <ErrorCode>xxx</ErrorCode>
        <ErrorMessage>xxx</ErrorMessage>
        <MessageId>123</MessageId>
    </MNSMessageResult>
</MediaInfoJob>
<RequestId>25818875-5F78-4A13-BE*****F6-D7393642CA58</RequestId>
```

`JSON`格式

```
{
    "MediaInfoJob": {
        "Message": "xxx",
        "UserData": "testid-001",
        "State": "Analyzing",
        "Async": true,
        "CreationTime": "2014-01-10T12:00:00Z",
        "PipelineId": "88c6ca184c0e4*****5b665e2a126797",
        "Code": "xxx",
        "JobId": "88c6ca184c0e4*****5b665e2a126797",
        "Input": {
            "Bucket": "example-bucket",
            "Object": "example.flv",
            "Location": "oss-cn-hangzhou"
        },
        "Properties": {
            "Fps": 25,
            "Duration": 17.226,
            "Height": 1080,
            "FileFormat": "QuickTime / MOV",
            "Bitrate": 1630.045,
            "Width": 1920,
            "FileSize": 3509895,
            "Streams": {
                "VideoStreamList": {
                    "VideoStream": {
                        "CodecTag": 0,
                        "CodecTimeBase": "1001/48000",
                        "Rotate": 90,
                        "Sar": "1:1",
                        "StartTime": 0.042,
                        "Fps": 25,
                        "Lang": "eng",
                        "Duration": 17.225542,
                        "Index": 1,
                        "PixFmt": "yuv420p",
                        "Bitrate": 1496.46,
                        "CodecName": "h264",
                        "AvgFPS": 23.976025,
                        "Profile": "High",
                        "Timebase": "1/24000",
                        "HasBFrames": 0,
                        "CodecTagString": "avc1",
                        "Dar": "16:9",
                        "CodecLongName": "H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10",
                        "Level": 41,
                        "Height": 1080,
                        "NumFrames": 100,
                        "Width": 1920,
                        "NetworkCost": {
                            "AvgBitrate": 300.34,
                            "PreloadTime": 8,
                            "CostBandwidth": 10
                        }
                    }
                },
                "SubtitleStreamList": {
                    "SubtitleStream": {
                        "Timebase": "1/1000",
                        "CodecTag": 0,
                        "CodecTagString": "[0][0][0][0]",
                        "CodecTimeBase": "0/1",
                        "CodecLongName": "ASS (Advanced SSA) subtitle",
                        "StartTime": 0,
                        "Lang": "eng",
                        "Duration": 1370.116,
                        "Index": 3,
                        "CodecName": "ass"
                    }
                },
                "AudioStreamList": {
                    "AudioStream": {
                        "CodecTag": 0,
                        "CodecTimeBase": "1/44100",
                        "ChannelLayout": "stereo",
                        "StartTime": 0,
                        "Lang": "eng",
                        "Duration": 17.159546,
                        "Index": 1,
                        "SampleFmt": "fltp",
                        "Bitrate": 128.806,
                        "Samplerate": 44100,
                        "CodecName": "aac",
                        "Channels": 2,
                        "Timebase": "1/44100",
                        "CodecTagString": "mp4a",
                        "CodecLongName": "AAC (Advanced Audio Coding)",
                        "NumFrames": 123
                    }
                }
            },
            "Format": {
                "NumPrograms": 0,
                "Size": 3509895,
                "FormatLongName": "QuickTime / MOV",
                "StartTime": 0,
                "FormatName": "mov,mp4,m4a,3gp,3g2,mj2",
                "NumStreams": 2,
                "Duration": 17.226,
                "Bitrate": 1630.045
            }
        },
        "MNSMessageResult": {
            "ErrorCode": "xxx",
            "ErrorMessage": "xxx",
            "MessageId": 123
        }
    },
    "RequestId": "25818875-5F78-4A13-BE*****F6-D7393642CA58"
}
```

## 错误码

访问[错误中心](https://error-center.aliyun.com/status/product/Mts)查看更多错误码。

